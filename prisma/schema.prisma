generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model TipoImovel {
  id        Int      @id @default(autoincrement())
  nome      String   @db.VarChar(100)
  createdAt DateTime @default(now()) @db.Timestamp(0)
  updatedAt DateTime @default(now()) @updatedAt @db.Timestamp(0)
  imoveis   Imovel[]

  @@map("tipos_imovel")
}

model Imovel {
  id           Int         @id @default(autoincrement())
  codigo       String      @unique(map: "codigo") @db.VarChar(50)
  descricao    String      @db.VarChar(255)
  tipoImovelId Int
  createdAt    DateTime    @default(now()) @db.Timestamp(0)
  updatedAt    DateTime    @default(now()) @updatedAt @db.Timestamp(0)
  tipoImovel   TipoImovel  @relation(fields: [tipoImovelId], references: [id], onUpdate: Restrict, map: "imoveis_ibfk_1")
  pagamentos   Pagamento[]

  @@index([tipoImovelId], map: "tipoImovelId")
  @@map("imoveis")
}

model Pagamento {
  id            Int      @id @default(autoincrement())
  dataPagamento DateTime @db.Date
  valor         Decimal  @db.Decimal(10, 2)
  imovelId      Int
  createdAt     DateTime @default(now()) @db.Timestamp(0)
  updatedAt     DateTime @default(now()) @updatedAt @db.Timestamp(0)
  imovel        Imovel   @relation(fields: [imovelId], references: [id], onUpdate: Restrict, map: "pagamentos_ibfk_1")

  @@index([dataPagamento], map: "dataPagamento")
  @@index([imovelId], map: "imovelId")
  @@map("pagamentos")
}
